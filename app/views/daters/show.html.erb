<div class="dashboard-header">
  <h2 class="text-accent"><%= current_dater.f_name %>'s Profile</h2>


  <div class="card text-center">
      <div class="card-header">
        <a href="#" class="primary-btn btn-sm login-button">Add To Pool</a><a href="#" class="primary-btn btn-sm login-button">Message Me</a>
      </div>

      <div class="card-body item-center">
        <h5 class="card-title"><%= current_dater.f_name %></h5>
        <div class="item-center" ><%= image_tag current_user.image.url, class:'', size:"250x250" %></div>
      </div>

      <div class="card-group">
        <div class="card">
          <div class="card-body">
            <p class="card-text text-left">Age: <%=  %></p>
            <p class="card-text text-left">Location: <%= @dater.trait.zip %></p>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
           <p class="card-text text-left">Gender: <%= @dater.trait.gender %></p>
           <p class="card-text text-left">Orientation: <%= @dater.trait.orientation %></p>
          </div>
        </div>
      </div>

      <!-- <div class="card-group">
        <div class="card">
          <div class="card-body item-center">
              <a href="#" class="primary-btn btn-sm login-button"></a>
          </div>
        </div>
        <div class="card">
          <div class="card-body item-center">
             <a href="#" class="primary-btn btn-sm login-button">View</a>
          </div>
        </div>
      </div> -->

      <div class="card-footer text-muted"><br></div>
</div>
<div class="card" style="width=100%">

<br>
<h2 class="text-accent">About <%= @dater.f_name %></h2>
<br>
<div class="text-center text-navy"><h3> <%= @dater.f_name%>'s Life N Stuff </h3></div>
<br>
<div class="card-deck">

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Physical</h5>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Height: <%= @dater.trait.height/12.round %>' <%=@dater.trait.height%12 %>"</li>
        <li class="list-group-item">Build: <%= @dater.trait.body_type %></li>
        <li class="list-group-item">Smoker: <%= @dater.trait.smoker %></li>
        <li class="list-group-item">Drinking: <%= @dater.trait.alcohol %></li>
        <!-- <li class="list-group-item">Ethnicity: <%= @dater.trait.ethnicity %></li> -->
      </ul>
    </div>
    </div>
    <div class="card">
    <div class="card-body">
      <h5 class="card-title">Personal</h5>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Education: <%= @dater.trait.education %></li>
        <li class="list-group-item">Occupation: <%= @dater.trait.occupation %></li>
        <li class="list-group-item">Beliefs: <%= @dater.trait.religion %></li>
        <li class="list-group-item">How important are their beliefs: <%= @dater.trait.religiosity %></li>
        <li class="list-group-item">Political Leaning: <%= @dater.trait.political_leaning %></li>
        <li class="list-group-item">How important are their politics: <%= @dater.trait.politicalness %></li>
      </ul>
    </div>
    </div>
    <div class="card">
    <div class="card-body">
      <h5 class="card-title">Family</h5>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Has Kids: <%= @dater.trait.has_kids %></li>
        <li class="list-group-item">Wants (more) Kids: <%= @dater.trait.wants_kids %></li>
        <li class="list-group-item">Has pets: <%= @dater.trait.has_pets %></li>
      </ul>
    </div>
    </div>
  </div>
<<<<<<< HEAD
</div>


<button id="edit-user-profile-btn-pix" class="primary-btn btn-sm card-button"><span>Pictures</span></button>
  <div class="card-deck-none" id="pix">
    <% if  current_dater.dater_images(current_user.id).empty?%>
        <div class="card">
          <div class="card-body">
            Hmmm...You don't seem to have any pictures.
              <%= form_for (current_dater) do |f| %>
                <p class="list-group-item">Upload a Picture <%= f.file_field :image %></p>
                <%= f.submit "    Save    ", class: "primary-btn btn-sm login-button" %>
              <% end %>
          </div>
        </div>

    <% else %>
      <div class="card-group">
        <% current_dater.dater_images(current_user.id).each do |image| %>
        <div class="card">
          <%#= image_tag image.file, class:'', size:"100x100" %>
          <div class="card-footer">
            <small class="text-muted">Remove</small>
          </div>
        </div>
      <% end  %>
      </div>
      <div class="card">
        <div class="card-body">
            <%= form_for (current_dater) do |f| %>
              <p class="list-group-item">Upload a Picture <%= f.file_field :image %></p>
              <%= f.submit "    Save    ", class: "primary-btn btn-sm login-button" %>
            <% end %>
        </div>
      </div>


      <% end  %>
  </div>
=======

</div>

<br>
<div class="text-center text-navy"><h3>  <%= @dater.f_name%>'s Personality </h3></div>
<br>
>>>>>>> erbs


  <div class="card-deck">
    <div class="card profile-card">
        <table class="table table-striped">
          <thead>
            <tr>
                <th scope="col">Persronality Trait</th>
                <th scope="col">Average</th>
            </tr>
          </thead>
          <tbody>
            <tr>
               <td>  Independent: </td>
               <td>  <%= @dater.avg_personality(current_dater.id, "independent") %></td>
            </tr>
            <tr>
               <td> Friendly: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "friendly") %></td>
            </tr>
            <tr>
               <td> Shy: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "shy") %></td>
            </tr>
            <tr>
               <td> Spontaneous: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "spontaneous") %></td>
            </tr>
            <tr>
               <td> Organized: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "organized") %></td>
            </tr>
          </tbody>
        </table>
    </div>
    <div class="card profile-card">
        <table class="table table-striped">
          <thead>
            <tr>
                <th scope="col">Persronality Trait</th>
                <th scope="col">Average</th>
            </tr>
          </thead>
          <tbody>
            <tr>
               <td> Funny: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "funny") %></td>
            </tr>
            <tr>
               <td> Silly: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "silly") %></td>
            </tr>
            <tr>
               <td> Adaptable: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "adaptable") %></td>
            </tr>
            <tr>
               <td> Confident: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "confident") %></td>
            </tr>
            <tr>
               <td> Energetic: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "energetic") %></td>
            </tr>
          </tbody>
        </table>
    </div>
    <div class="card profile-card">
        <table class="table table-striped">
          <thead>
            <tr>
                <th scope="col">Persronality Trait</th>
                <th scope="col">Average</th>
            </tr>
          </thead>
          <tbody>
            <tr>
               <td> Relaxed: </td>
               <td><%= @dater.avg_personality(current_dater.id, "relaxed") %></td>
            </tr>
            <tr>
               <td> Patient: </td>
               <td><%= @dater.avg_personality(current_dater.id, "patient") %> </td>
            </tr>
            <tr>
               <td> Logical: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "logical") %></td>
            </tr>
            <tr>
               <td> Intelligent: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "intelligent") %></td>
            </tr>
            <tr>
               <td> Charitable: </td>
               <td> <%= @dater.avg_personality(current_dater.id, "charitable") %></td>
            </tr>
          </tbody>
        </table>
    </div>
  </div>



<br>
<div class="text-center text-navy"><h3> <%= @dater.f_name %>'s Pictures </h3></div>
<br>


<<<<<<< HEAD
<button id="edit-user-profile-btn-mates" class="primary-btn btn-sm card-button"><span>Your Preferences for a Match</span></button>
    <div class="card-deck-none" id="mates">
      <%= render 'dater_mates' %>
    </div>
=======
<br>
<div class="text-center text-navy"><h3> What <%= @dater.f_name %>'s Backers say</h3></div>
<br>
<!-- Things Backers Say-->

>>>>>>> erbs


</div>
</div>

<script>
<<<<<<< HEAD

$("#edit-user-profile-btn-percent").click(function() {
  event.preventDefault()
  $("#percent-complete").toggleClass("card-deck")
})
$("#edit-user-profile-btn-backers").click(function() {
  event.preventDefault()
  $("#your-backers-deck").toggleClass("card-deck")
})

    $('#list-backer-button').click(function(){
      $('.list-backers').toggleClass('list-backers-show')
    })

    $('#list-backer-button').click(function(){
      $('.list-and-add-backers').toggleClass('list-backers-show')
    })

$("#edit-user-profile-btn-pix").click(function() {
  event.preventDefault()
  $("#pix").toggleClass("card-deck")
})
$("#edit-user-profile-btn-traits").click(function() {
  event.preventDefault()
  $("#traits").toggleClass("card-deck")
})

$("#edit-user-profile-btn-personality").click(function() {
  event.preventDefault()
  $("#personality").toggleClass("card-deck")
})

$("#edit-user-profile-btn-mates").click(function() {
  event.preventDefault()

  $("#mates").toggleClass("card-deck-mates")
})


// DATER SEARCHES FOR BACKER BY NAME
    $('#find-backer-by-name').click(function(event) {
      event.preventDefault()
      let first = event.target.offsetParent.childNodes[1].value
      let last =  event.target.offsetParent.childNodes[3].value
      let currentUser = document.location.pathname.substr(11)

            fetch(`https://pytdating-live.herokuapp.com/api/v1/users?f_name=${first}&l_name=${last}`)
            .then((response) => response.json())
            .then((parsedBackers) => {
              console.log("line 122", parsedBackers)
              if (parsedBackers.length === 0) {
                // CAN'T FIND BY FIRST AND LAST NAME
                $("#your-backers").append(
                  `<div class="alert alert-warning" role="alert" id="backer-not-found-alert">
                    <h4 class="alert-heading">Oh Snap!</h4>
                      <p>That person isn't signed up. Send them an invite!</p>
                   </div>`)
                $("#backer-not-found-alert").delay( 3000 ).fadeOut( 300 )
              }

              else {
                //FOUND AT LEAST ONE PERSON BY THAT NAME. PRESENT NAME AND IMAGES FOR USER TO SELECT.
                $("#your-backers").append(
                   `<div class="alert alert-success" role="alert" id="backer-invited-alert">
                      <h4 class="alert-heading"> Which ${first.toUpperCase()} ${last.toUpperCase()} is your Framily Member?</h4>
                    </div>`)
                $("#backer-invited-alert").delay( 2000 ).fadeOut( 300 )
                parsedBackers.forEach(function(backer) {
                $("#your-backers").append(`
                  <div class="card" style="width: 10rem;">
                    <div class style="width: 50;">
                    <img class="card-img-top" src="${backer.image.url}" alt="Card image cap">
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">${backer.f_name} ${backer.l_name}</h5>
                      <p class="card-text">...</p>
                      <a class ="primary-btn card-button text-center" id="connect-user-as-backer" data-text="${backer.id}">Connect!</a>
                    </div>
                  </div>
                `)
                })
              }
            })
            .catch(error => console.error(error))
    })

// DATER ADDS NEW BACKER...use backer_id in
    $('#your-backers').on("click", '#connect-user-as-backer', function(event) {
      event.preventDefault()
      let backerId = event.currentTarget.dataset.text

      $.get(`https://pytdating-live.herokuapp.com/invites?backer_id=${backerId}`)
      $("#your-backers").append(`
        <div class="alert alert-success" role="alert" id="dater-invited-alert">
          <h4 class="alert-heading"> Email Sent!</h4>
          `).delay( 1500 ).fadeOut( 300 )

      })



// SEND EMAIL TO INVITE NEW BACKER
    $(".card-body-center").on("click", "#invite-backer-button", function(event) {
      event.preventDefault()
      let email = event.target.offsetParent.childNodes[1].value
      $.get(`https://pytdating-live.herokuapp.com/invites?email=${email}&add_backer=true`)
      $("#your-backers").append(`
        <div class="alert alert-success" role="alert" id="dater-invited-alert">
          <h4 class="alert-heading"> Email Sent!</h4>
          `).delay( 1500 ).fadeOut( 300 )
      // $(".list-and-add-backers").html('')
    })



=======
>>>>>>> erbs
</script>
